<div style="float: left; width: 64%; padding: 1%;">

### 路由器的组成和功能

<ul>

>  pro：路由器的功能（2010）

#### 路由器基本概念

<ul>

- 路由器是一种具有多个输入/输出端口的专用计算机
  - 其任务是连接不同的网络（连接异构网络）并完成分组转发
  - 在多个逻辑网络（即多个广播域）互连时必须使用路由器

</ul>

#### 数据传输过程

<ul>

- 当源主机向自标主机发送数据报时
  - 路由器先检查源主机与目标主机是否连接在同一个网络上
  - 若源主机和自标主机在同一个网络上，则直接交付而无须通过路由器
  - 若源主机和目标主机不在同一个网络上
    - 则路由器按照转发表（由路由表得出）指出的路由将分组转发给下一个路由器，这称为间接交付
- 在同一个网络中传递数据无须路由器的参与，而跨网络通信必须通过路由器进行转发
  - 例如，路由器可以连接不同的LAN，连接不同的VLAN，连接不同的WAN，或者把LAN和WAN互连起来
  - 路由器隔离了广播域

</ul>

#### 路由器结构

<ul>

- 从结构上看，路由器由路由选择和分组转发两部分构成，如图4.23所示
- 从模型的角度看，路由器是网络层设备，它实现了网络模型的下三层，即物理层、数据链路层和网络层

> **attention:**

若一个存储转发设备实现了某个层次的功能，则它可以互连两个在该层次上使用不同协议的网段（网络）。若网桥实现了物理层和数据链路层，则网桥可以互连两个物理层和数据链路层不同的网段；但中继器实现了物理层后，却不能互连两个物理层不同的网段，这是因为中继器不是存储转发设备，它属于直通式设备。

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/a6f3e8013ec6d6e4ad6b99d005103a7ca8fdd09388de0733bec78e66420e84ed.jpg)
图4.23路由器体系结构

##### 路由选择部分

<ul>

- 也称控制部分，核心构件是路由选择处理机
- 其任务是
  - 根据所选定的路由选择协议构造出路由表
  - 同时经常或定期地和相邻路由器交换路由信息而不断更新和维护路由表

</ul>

##### 分组转发部分

<ul>

- 由三部分构成：
  - 交换结构
    - 也称交换组织
    - 其作用是根据转发表对分组进行处理，将某个输入端口进入的分组从一个合适的输出端口转发出去
    - 交换结构本身就是一个"在路由器中的网络"
  - 一组输入端口
  - 一组输出端口
- 路由器的端口特点
  - 都有物理层、数据链路层和网络层的处理模块
  - 输入端口处理流程
    - 在物理层接收比特流
    - 在数据链路层提取出帧
    - 剥去帧的首部和尾部后，分组就被送入网络层的处理模块
  - 输出端口执行相反的操作
  - 端口在网络层的处理模块中都设有一个缓冲队列
    - 用来暂存等待处理或已处理完毕待发送的分组
    - 还可用来进行必要的差错检测
    - 若分组处理的速率赶不上分组进入队列的速率，就会使后面进入队列的分组因缓冲区满而只能被去弃
  - 路由器的端口一般都具有输入和输出的功能，图4.23中分别给出输入和输出端口是为了使读者更容易理解

</ul>

</ul>

</ul>

</ul>


</div>
<div style="float: right; width: 26%; padding: 1%;">

</div>
<div style="clear: both;"></div>
