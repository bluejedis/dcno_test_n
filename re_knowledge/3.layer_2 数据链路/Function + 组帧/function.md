<div style="float: left; width: 64%; padding: 1%;">

## Function

<ul>

### 功能  

<ul>

#### 基本任务

<ul>

- 实现帧在一段链路上或一个网络中进行传输
- 三个基本问题
  - 封装成帧
  - 透明传输
  - 差错检测

</ul>

#### 信道类型

<ul>

- 点对点信道
  - 使用一对一的通信方式
  - PPP协议是目前使用最广泛的点对点协议
- 广播信道
  - 连接的主机很多，使用一对多的广播通信方式
  - 有线局域网普遍使用CSMA/CD协议
  - 无线局域网使用CSMA/CA协议

</ul>

</ul>

### 数据链路层所处的地位  

<ul>

#### 通信示例

<ul>

- 两台主机通过互联网通信
  - 局域网1中的主机H1经过路由器R1、广域网及路由器R2连接到局域网2中的主机H2
  - 主机H1和H2都有完整的五层协议栈
  - 路由器在转发分组时仅使用协议栈的下三层

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/e7e297fbb0520613c7252ae1f3530980f5248c701458e45dd8079c49662f2683.jpg)  
图3.1主机H1向H2发送数据  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/25920ca739682fceb5264e70ee939f8d7abe7feee0fa034448b85f86ab86b5f8.jpg)  
图3.2从层次上看数据的流动  

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/ffb78b2e18190098f64fcc494beb631836f32110a4006eb8b1a6412e30626310.jpg)  
图3.3只考虑数据在数据链路层的流动  

</ul>

#### 基本概念

<ul>

- 链路
  - 从一个结点到相邻结点的一段物理线路
  - 是通信路径的组成部分
- 数据链路
  - 在链路上加上必要的通信协议的硬件和软件
  - 物理链路vs逻辑链路
- 帧
  - 数据链路层对等实体之间进行逻辑通信的协议数据单元
  - 功能：
    - 把网络层下交的数据构成帧发送到链路上
    - 把接收到的帧中的数据取出并上交给网络层

</ul>

</ul>

### 为网络层提供服务  

<ul>

#### 服务类型

<ul>

- 无确认的无连接服务
  - 特点：
    - 不需要先建立链路连接
    - 不需要发回确认
  - 适用于误码率较低的信道，如以太网
- 有确认的无连接服务
  - 特点：
    - 不需先建立链路连接
    - 必须发回确认
    - 超时重传机制
  - 适用于误码率较高的信道，如无线通信
- 有确认的面向连接服务
  - 特点：
    - 三个阶段：建立链路、传输帧、释放链路
    - 每帧都要返回确认
  - 适用于可靠性要求较高的场合

> attention:  
有连接就一定要有确认，即不存在无确认的面向连接的服务。  

</ul>

</ul>

### 链路管理  

<ul>

#### 定义与过程

<ul>

- 链路管理是数据链路层连接的建立、维持和释放过程
- 主要用于面向连接的服务
- 通信步骤：
  - 确认对方就绪状态
  - 交换必要信息初始化
  - 建立连接
  - 维持连接
  - 传输完毕后释放连接

</ul>

</ul>

### 封装成帧与透明传输  

<ul>

#### 封装成帧

<ul>

- 定义：在数据前后添加首部和尾部构成帧
- 帧长计算：数据部分长度 + 首部长度 + 尾部长度
- 首部和尾部作用：
  - 确定帧界限（帧定界）
  - 实现帧同步
- HDLC协议示例：
  - 使用标识位F（01111110）标识帧的开始和结束
  - 标准帧格式如图3.4所示

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/cf66d2f1d0b40f4535ac0e51bb07fdcdfe8a22a900b11a84e927a41c2f9190f7.jpg)  
图3.4HDLC标准帧格式  

</ul>

#### 透明传输

<ul>

- 定义：能够按原样无差错地传输任何比特组合
- 解决问题：防止数据中出现与帧定界符相同的比特组合导致的误判

</ul>

</ul>

### <span style="color: green;">流量</span> <span style="color: Gold;">控制</span>  

<ul>

#### 基本概念

<ul>

- 目的：限制发送方的发送速率，避免超过接收方的接收能力
- 实现机制：
  - 通过反馈机制控制发送
  - 根据反馈信息决定继续发送或暂停

</ul>

#### 不同体系结构中的实现

<ul>

- OSI体系：在数据链路层实现
  - 控制相邻结点间数据链路上的流量
- TCP/IP体系：在传输层实现
  - 控制源端到目的端之间的流量

</ul>

</ul>

### <span style="color:darkred;">差错</span><span style="color: green;">检测</span>  

<ul>

#### 错误类型

<ul>

- 位错
  - 帧中某些位出现差错
  - 使用循环冗余检验(CRC)检测
- 帧错
  - 包括帧丢失、帧重复或帧失序
  - 属于传输差错

</ul>

#### 差错处理机制

<ul>

- 无线传输（通信质量较差）
  - 使用确认和重传机制
  - 数据链路层提供可靠传输服务
- 有线链路（通信质量良好）
  - 仅进行CRC检错
  - 丢弃错误帧
  - 重传任务由高层协议完成

</ul>

</ul>

</div>
<div style="float: right; width: 26%; padding: 1%;">

</div>
<div style="clear: both;"></div>
